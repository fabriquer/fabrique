#
# RUN: fab --parse-only --print-ast %s > %t
# RUN: FileCheck %s -input-file %t
#

# CHECK: foo:struct[hello:string, world:string] =
# CHECK: struct
# CHECK: {
# CHECK:   hello:string = 'Hello, ';
# CHECK:   world:string = 'world!';
# CHECK: }
foo = struct
{
	hello = 'Hello, ';
	world = 'world!';
};

# CHECK: bar:string = foo.hello ? 'default value for bar';
bar = foo.hello ? 'default value for bar';

# CHECK-DAG: baz:string = foo.wibble ? 'default value for wibble';
baz = foo.wibble ? 'default value for wibble';

# CHECK: x:string = struct
# CHECK-NEXT: {
# CHECK-NEXT:   hello:string = 'world';
# CHECK-NEXT: }
# CHECK: .hello ? 'default value';
x = (struct { hello = 'world'; }).hello ? 'default value';
