#
# RUN: fab --format=make --output=%t %s
# RUN: FileCheck %s -input-file %t/Makefile
#

cc = import('Inputs/cc.fab', compiler = file('/usr/bin/cc'));

# CHECK: ${buildroot}/Inputs/foo.c.o : ${srcroot}/Inputs/foo.c
# CHECK:   /usr/bin/cc -c -MMD -MF ${buildroot}/Inputs/foo.c.o.d ${srcroot}/Inputs/foo.c {{.*}}-o ${buildroot}/Inputs/foo.c.o
obj = cc.compile(files(Inputs/foo.c));

# CHECK: ${buildroot}/foo : ${buildroot}/Inputs/foo.c.o
# CHECK:   /usr/bin/cc -o ${buildroot}/foo ${buildroot}/Inputs/foo.c.o
bin = cc.link_executable(obj, executable = file('foo'));
