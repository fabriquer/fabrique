#
# RUN: fab --format=ninja --output=%t %s
# RUN: FileCheck %s -input-file %t
#

# CHECK: rule lex
# CHECK-NEXT:  command = $LEX -c++ --yyclass=$classname --outfile=$out $in
# CHECK-NEXT:  description = $LEX -c++ --yyclass=$classname --outfile=$out $in
lex = action('$LEX -c++ --yyclass=$classname --outfile=$out $in'
              <- classname:string);

# CHECK: build foo.c: lex foo.yy
# CHECK-NEXT: classname = FooClass
gen = lex(file('foo.yy'), file('foo.c'), classname = 'FooClass');
