#
# RUN: fab --print-dag --format=null %s > %t
# RUN: FileCheck %s -input-file %t
#

# CHECK-DAG: file src = Inputs/foo.c
src = file('Inputs/foo.c');

# CHECK-DAG: (file)=>file cc = cc -c $in -o $out
cc = action('cc -c $in -o $out' <- in:file, out:file);

# CHECK-DAG: (list[file])=>file link = cc $in -o $out
link = action('cc $in -o $out' <- out:file);

# CHECK-DAG: build: cc { Inputs/foo.c => foo.o }
# CHECK-DAG: file obj = foo.o
obj = cc(src, out = file('foo.o'));

# CHECK-DAG: build: link { foo.o => foo }
# CHECK-DAG: file bin = foo
bin = link([ obj ], out = file('foo'));
