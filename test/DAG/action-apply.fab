#
# RUN: %fab --format=null --print-dag %s > %t
# RUN: FileCheck %s -input-file %t
#

# CHECK-DAG: (file)=>list[file] compile_one_cxx_file = $CXX -c $cxxflags
compile_one_cxx_file = action('$CXX -c $cxxflags -MMD -MF $depfile $src -o $obj',
	description = 'Compiling $src'
	<- src:file[in], obj:file[out], depfile:file[out]);

# CHECK-DAG: build: compile_one_cxx_file { a.cc => a.o{{(.d)?}} a.o{{(.d)?}} }
# CHECK-DAG: list[file] single_object = [ a.o{{(.d)?}} a.o{{(.d)?}} ]
single_object = compile_one_cxx_file(file('a.cc'), obj = file('a.o'), depfile = file('a.o.d'));
