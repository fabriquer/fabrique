#
# RUN: %fab --parse-only --print-ast %s > %t
# RUN: FileCheck %s -input-file %t
#

# CHECK: foo:record[hello:string, world:string] =
# CHECK: record
# CHECK: {
# CHECK:   hello:string = 'Hello, ';
# CHECK:   world:string = 'world!';
# CHECK: }
foo = record
{
	hello = 'Hello, ';
	world = 'world!';
};

# CHECK: bar:string = foo.hello ? 'default value for bar';
bar = foo.hello ? 'default value for bar';

# CHECK-DAG: baz:string = foo.wibble ? 'default value for wibble';
baz = foo.wibble ? 'default value for wibble';

# CHECK: x:string = record
# CHECK-NEXT: {
# CHECK-NEXT:   hello:string = 'world';
# CHECK-NEXT: }
# CHECK: .hello ? 'default value';
x = (record { hello = 'world'; }).hello ? 'default value';
