LEX = 'flex';


raw_lex = action('${LEX} ${flags} --header-file=${header} --outfile=${gen} ${src}',
                 description = 'Processing ${in}'
                 <- src:file[in], gen:file[out], header:file[out],
                    flags:list[string] = []);

process = function(src:file, gen:file, header_out:file, flags:list[string] = [])
	: file
{
	lex = raw_lex(src, gen, header_out, flags);
	gen
};
